---
title: "Shiny Anatomy"
output: 
  distill::distill_article:
    toc: true
    toc_float: true
    toc_depth: 4
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = FALSE)
```

A Shiny app generally consists of three parts: the **user interface** (UI), the **server**, and a place for **global** variables.

# global

In a single file app, packages and global variables can be loaded at the top of the script.

```{r}
library(shiny)
library(tidyverse)
library(here)

df <- read_csv(here('data', 'babynames.csv'))
```

# UI

The UI is comprised of R functions that will ultimately generate HTML--a markup language that structures and presents content for the web.   

```{r}
ui <- fluidPage(
  # static elements in the UI
  titlePanel("U.S. Baby Names"),
  p("Source:", 
    tags$a(href = "https://www.ssa.gov/oact/babynames/limits.html", 
           "Social Security Administration"))
)
```

Store elements of your UI inside `fluidPage()` separated by commas. You can use any of the following:  
  
  - Pre-set Shiny UI functions (e.g. `titlePanel()`, `fluidRow()`)
  - Reference HTML tags using `tag$` as a prefix (e.g `tag$img()`). 
    - For a list of HTML tags: `names(tags)`
    - The most common tags are functions themselves and don't require the prefix (e.g. `p()`, `h1()`, etc.)
  - raw HTML within the wrapper `html()`
  
## Outputs

Functions ending in `*Output()`, creates space(s) in the UI for R outputs. However, the UI can't process and display R output by itself, it requires help from the server.  

```{r}
ui <- fluidPage(
  
  titlePanel("U.S. Baby Names"),
  p("Source:", 
    tags$a(href = "https://www.ssa.gov/oact/babynames/limits.html", 
           "Social Security Administration")),
  
  # a place to display our data frame as a table. Its ID is 'main_table'
  tableOutput("main_table")
  
)

```

# Server

## Render

For every `*Output()` there is a `render*()` in the server. They work as pairs, connected by the unique name of the output, to add R output to the UI.

```{r}
server <- function(input, output) {
  
  # render the r object `df` to the space called, 'main_table'.
  output$main_table <- renderTable({
    df %>% slice(1:20)
    })
}
```

The server is one large function. `output` is inherent in Shiny--it is a list-like object with code required to update each output object.

# Inputs

```{r}
ui <- fluidPage(
  
    titlePanel("U.S. Baby Names"),
    p("Source:", 
      tags$a(href = "https://www.ssa.gov/oact/babynames/limits.html", 
             "Social Security Administration")),
    
    # A place to enter a name
    textInput("name", 
              label = "Enter name",
              placeholder = "Jane"),
    
    tableOutput("main_table")
  
)
```

```{r}
ui <- fluidPage(
  
    titlePanel("U.S. Baby Names"),
    p("Source:", 
      tags$a(href = "https://www.ssa.gov/oact/babynames/limits.html", 
             "Social Security Administration")),
    
    textInput("name", 
              label = "Enter name",
              placeholder = "Jane"),
    
    # Display the name that was entered in textInput
    textOutput("name_entered"),
    
    tableOutput("main_table")
  
)
```

```{r}
server <- function(input, output) {
  
  # render the textInput to the designated output
  output$name_entered <- renderText({
    print(c("You entered:", input$name))
  })
  
  output$main_table <- renderTable({
    df %>% slice(1:20)
    })
  
   
}
```








